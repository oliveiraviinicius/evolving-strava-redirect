<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<title>Evolving Strava Redirect</title>
<script>
(function () {
  const url = new URL(window.location.href);
  const code = url.searchParams.get("code");
  const state = url.searchParams.get("state") || "";
  const error = url.searchParams.get("error");

  if (error) {
    window.location.href =
      `evolving://oauth-callback/strava?error=${encodeURIComponent(error)}`;
    return;
  }

  if (!code) {
    document.body.innerText = "Missing code";
    return;
  }

  window.location.href =
    `evolving://oauth-callback/strava?code=${encodeURIComponent(code)}&state=${encodeURIComponent(state)}`;
})();
</script>
</head>
<body>
Redirecting to Evolving...
</body>
</html>