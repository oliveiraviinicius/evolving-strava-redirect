<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="refresh" content="0; url=evolving://oauth-callback/strava?code=%CODE%&state=%STATE%" />
  </head>
  <body>
    Redirecting...
    <script>
      const url = new URL(window.location.href);
      const code = url.searchParams.get("code") || "";
      const state = url.searchParams.get("state") || "";
      const error = url.searchParams.get("error");

      if (error) {
        window.location.replace(
          `evolving://oauth-callback/strava?error=${encodeURIComponent(error)}`
        );
      } else {
        window.location.replace(
          `evolving://oauth-callback/strava?code=${encodeURIComponent(code)}&state=${encodeURIComponent(state)}`
        );
      }
    </script>
  </body>
</html>
